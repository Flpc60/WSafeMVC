@model IEnumerable<WSafe.Web.Models.MovimientVM>

@{
    var title = "INFORMACIÓN BÁSICA DE LA EMPRESA";
}

<style>
    .tabGesMovimientos, .tabAddMovimientos
    {
        display: none;
    }
</style>

<hr />
<hr />
<h4>@title</h4>

<div class="pull-left">
    <div class="btn-group">
        <button type="button" class="btn btn-success" id="planear" title="doble click para cerrar la ventana">PLANEAR</button>
        <button type="button" class="btn btn-warning" id="hacer" title="doble click para cerrar la ventana">HACER</button>
        <button type="button" class="btn btn-info" id="verificar" title="doble click para cerrar la ventana">VERIFICAR</button>
        <button type="button" class="btn btn-info" id="actuar" title="doble click para cerrar la ventana">ACTUAR</button>
    </div>
</div>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="tabGesMovimientos">
            <div class="col-md-12">
                <button type="button" class="btn btn-primary" id="addMovimient">Subir un nuevo archivo</button>
            </div>
            @Html.Partial("_ShowMovimientos")
        </div>

        <div class="tabAddMovimientos">
            @Html.Partial("_EditMovimientos")
            <div class="row">
                <div class="col-md-8">
                    <hr />
                    <button type="button" id="btnAddMovimient" class="btn btn-primary" onclick="AddNewMovimient()">Adicionar</button>
                    <button type="button" id="btnCanMovimient" class="btn btn-primary" onclick="CancelMovimient()">
                        <span class="glyphicon glyphicon-chevron-left"></span> Cerrar
                    </button>
                </div>
                <div class="col-md-4">
                </div>
            </div>
        </div>


    </div>
}

@section Scripts
{
    <script src="~/Scripts/GestorRiesgosSST.js" type="text/javascript"></script>
    <script type="text/javascript">

        GestorMovimient();
        function CancelMovimient() {
            $(".tabAddMovimientos").css("display", "none");
            $("#txtCodigo").val("");
            $("#txtDescrip").val("");
        }

        function loadNormas(phva) {
            var selectedStandard = $("#txtStandardID").val();
            if (selectedStandard != null && selectedStandard != '') {
                $.getJSON('@Url.Action("GetNormas")', { id: phva }, function (standards) {
                    if (standards != null && !jQuery.isEmptyObject(standards)) {
                        var html = '';
                        $.each(standards, function (index, item) {
                            html += '<option value = "' + item.Value + '">' + item.Text + '</option>';
                        });
                        $("#txtStandardID").html(html);
                    };
                });
            }
        }

        $(document).ready(function () {
            ClearTextBox();
            $("#txtCodigo").focus();
        });

    </script>
}