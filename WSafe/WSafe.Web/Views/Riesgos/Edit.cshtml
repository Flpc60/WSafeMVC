@model WSafe.Web.Models.RiesgoViewModel
@using System.Web.Mvc.Html;

@{
    ViewBag.Title = "GESTIONAR RIESGOS";
    var riesgoID = @ViewBag.RiesgoID;
}

<style>
    .tabInterven, .capInterven, .tabPeligros, .tabEvalRiesgos, .tabMediAplica, .consInterven, .tabIntervencion, .tabAddInterven {
        display: none;
    }
</style>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h4>Editar Riesgo</h4>
        <hr />
        <hr />
        <h4>GESTIÓN DE RIESGOS</h4>
        <div class="row">
            <div class="col-md-4">
                <button type="button" class="btn btn-warning" id="idPeligros" title="doble click para cerrar la ventana">1. IDENTIFICACIÓN PELIGROS</button>
            </div>
            <div class="col-md-4">
                <button type="button" class="btn btn-warning" id="evalRiesgos" title="doble click para cerrar la ventana">2. EVALUACIÓN RIESGOS</button>
            </div>
            <div class="col-md-4">
                <button type="button" class="btn btn-warning" id="mediAplica" title="doble click para cerrar la ventana">3. MEDIDAS INTERVENCIÓN</button>
            </div>
            <div class="col-md-4">
                <button type="button" class="btn btn-warning" id="acciones" title="doble click para cerrar la ventana"> ACCIONES CPM</button>
            </div>
        </div>
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="tabPeligros">
            <hr />
            @Html.Partial("_EditarPeligros")
        </div>

        <div class="tabEvalRiesgos">
            <hr />
            @Html.Partial("_EvalRiesgo")
            <input type="hidden" id="txtRiesgoID" name="txtRiesgoID" />
            <div class="col-md-offset-2 col-md-4">
                <button type="button" id="btnAddRiesgo" class="btn btn-success" onclick="UpdateRiesgo()">Guardar</button>
            </div>
        </div>

        <div class="tabMediAplica">
            <hr />

            <div class="col-md-12">
                <button type="button" class="btn btn-primary" id="addIntervencion">Adicionar nueva medida de intervención</button>
            </div>
            <table class="table table-bordered table-hover">
                <thead>
                    <tr>
                        <th>
                            Descripción
                        </th>
                        <th>
                            Controles
                        </th>
                        <th>
                            Medidas Intervención
                        </th>
                        <th>
                            Responsable
                        </th>
                        <th>
                            Fecha inicial
                        </th>
                        <th>
                            Fecha final
                        </th>
                        <th>
                            Opciones
                        </th>
                    </tr>
                </thead>
                <tbody class="tbody">
                </tbody>
            </table>
        </div>
        <div class="tabAddInterven">
            <input type="hidden" id="txtIntervenID" name="txtIntervenID" />
            @Html.Partial("_EditarIntervencion")
            <div class="col-md-offset-2 col-md-4">
                <div class="col-md-2">
                    <button type="button" id="btnAddInterven" class="btn btn-primary" onclick="AddInterven()">Adicionar</button>
                </div>
                <div class="col-md-2">
                    <button type="button" id="btnUpdInterven" class="btn btn-primary" onclick="UpdateIntervencion()">Guardar</button>
                </div>
            </div>
        </div>

    </div>
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}