@model WSafe.Web.Models.UnsafeactVM

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h4>Ingresar acto inseguro</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        @Html.Partial("_EditUnsafeact")
    </div>

}

@section Scripts
{
    <script type="text/javascript">

        $('#categoria').click(function () {
            var selectedCategoria = $("#categoria").val();
            var peligroSelect = $('#peligro');
            peligroSelect.empty();
            if (selectedCategoria != null && selectedCategoria != '') {
                $.getJSON('@Url.Action("GetPeligros")', { ID: selectedCategoria }, function (peligros) {
                    if (peligros != null && !jQuery.isEmptyObject(peligros)) {
                        $.each(peligros, function (index, item) {
                            peligroSelect.append($('<option />',
                                {
                                    value: item.Value,
                                    text: item.Text
                                }));
                        });
                    };
                });
            }
        });

        function CancelRisk() {
            $(".tabEvalRiesgos").css("display", "none");
            $(".tabIncidents").css("display", "none");
        }

        function CancelInterven() {
            $(".tabAddInterven").css("display", "none");
        }

    </script>
}
